# Story 1.4: End-to-End "Echo" Connection

## Status
Draft

## Story
**As a** user,
**I want** to type a message, click "Send", and see the response from the live backend displayed on the page,
**so that** I can have a basic, confirmed conversation.

## Acceptance Criteria
1. On "Send", the frontend sends input to the deployed endpoint.
2. The backend response is received.
3. The response is displayed.
4. The input is cleared.

## Tasks / Subtasks
- [ ] Create API client function (AC: 1)
  - [ ] Add fetch utility for API calls
  - [ ] Create function to send message to backend
  - [ ] Handle HTTP request/response
- [ ] Integrate frontend with backend (AC: 1, 2)
  - [ ] Connect submit handler to API call
  - [ ] Add loading state during API call
  - [ ] Handle API response
  - [ ] Add error handling for failed requests
- [ ] Update UI to display response (AC: 3)
  - [ ] Add response message to display area
  - [ ] Format user and backend messages differently
  - [ ] Update message list state
- [ ] Implement input clearing (AC: 4)
  - [ ] Clear input field after successful send
  - [ ] Reset input state
  - [ ] Maintain focus on input field
- [ ] Test end-to-end functionality
  - [ ] Test successful message flow
  - [ ] Test error handling
  - [ ] Test input clearing behavior

## Dev Notes

### Tech Stack Context
- **Frontend Framework**: Next.js ~14.2.3 for React framework [Source: architecture/tech-stack.md]
- **Backend Framework**: Next.js API Routes ~14.2.3 for serverless functions [Source: architecture/tech-stack.md]
- **API Style**: REST / RPC-like for API communication [Source: architecture/tech-stack.md]
- **Language**: TypeScript ~5.4.5 for type safety [Source: architecture/tech-stack.md]
- **State Management**: React Hooks & Context ~18.3.1 for local state [Source: architecture/tech-stack.md]

### Project Structure Requirements
- Frontend in apps/web/pages/ [Source: architecture/unified-project-structure.md]
- API routes in apps/web/pages/api/ [Source: architecture/unified-project-structure.md]
- No database required (stateless) [Source: architecture/tech-stack.md]

### Testing Standards
- **Frontend Testing**: Jest & React Testing Library ~29.7.0 [Source: architecture/tech-stack.md]
- **Backend Testing**: Jest ~29.7.0 for API testing [Source: architecture/tech-stack.md]
- **E2E Testing**: Playwright ~1.44.1 for full flow testing [Source: architecture/tech-stack.md]
- Multi-layered strategy following "testing pyramid" [Source: architecture/testing-strategy.md]

### File Locations
- apps/web/pages/index.tsx: Main page with chat interface
- apps/web/pages/api/echo.ts: Echo API endpoint
- apps/web/utils/api.ts: API client utilities
- apps/web/components/: Chat components (if needed)

### Technical Constraints
- No authentication required [Source: architecture/tech-stack.md]
- No database required (stateless) [Source: architecture/tech-stack.md]
- Serverless functions must be stateless [Source: architecture/tech-stack.md]

### Previous Story Insights
- Basic frontend page with input, button, and display area ready
- Serverless API endpoint deployed and accessible
- Next.js development environment configured

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-12-19 | 1.0 | Initial story creation | Bob (SM) |

## Dev Agent Record

### Agent Model Used
TBD

### Debug Log References
TBD

### Completion Notes List
TBD

### File List
TBD

## QA Results
TBD 