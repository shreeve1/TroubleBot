# Story 2.3: Session-End Escalation Prompt

## Status
Draft

## Story
**As a** technician,
**at the end of my session, I want** to be prompted to confirm if the issue needs to be escalated,
**so that** I can trigger the transcript generation process.

## Acceptance Criteria
1. An "End Session" button is added.
2. Clicking it triggers a modal.
3. The modal asks about escalation with "Yes" and "No" buttons.

## Tasks / Subtasks
- [ ] Add End Session button (AC: 1)
  - [ ] Create End Session button component
  - [ ] Position button in UI layout
  - [ ] Style button according to design
  - [ ] Add button to main chat interface
- [ ] Create escalation modal (AC: 2)
  - [ ] Create Modal component using Headless UI
  - [ ] Design modal layout and styling
  - [ ] Add modal trigger functionality
  - [ ] Implement modal state management
- [ ] Implement escalation prompt (AC: 3)
  - [ ] Add escalation question text
  - [ ] Create Yes/No button components
  - [ ] Style buttons according to design
  - [ ] Add button click handlers
- [ ] Integrate with chat interface
  - [ ] Connect End Session button to modal
  - [ ] Handle Yes/No button responses
  - [ ] Add loading states for responses
  - [ ] Test modal accessibility
- [ ] Add animations and polish
  - [ ] Add modal open/close animations
  - [ ] Add button hover effects
  - [ ] Ensure keyboard navigation
  - [ ] Test mobile responsiveness

## Dev Notes

### Tech Stack Context
- **UI Component Library**: Headless UI ~2.0.4 for unstyled, accessible components [Source: architecture/tech-stack.md]
- **CSS Framework**: Tailwind CSS ~3.4.3 for utility-first styling [Source: architecture/tech-stack.md]
- **Frontend Framework**: Next.js ~14.2.3 for React framework [Source: architecture/tech-stack.md]
- **State Management**: React Hooks & Context ~18.3.1 for local state [Source: architecture/tech-stack.md]

### Project Structure Requirements
- Components in apps/web/components/ [Source: architecture/frontend-architecture.md]
- Modal component in apps/web/components/ui/ [Source: architecture/frontend-architecture.md]
- State Management: React's built-in Context API and hooks [Source: architecture/frontend-architecture.md]

### Testing Standards
- **Frontend Testing**: Jest & React Testing Library ~29.7.0 [Source: architecture/tech-stack.md]
- **E2E Testing**: Playwright ~1.44.1 for modal testing [Source: architecture/tech-stack.md]
- Multi-layered strategy following "testing pyramid" [Source: architecture/testing-strategy.md]

### File Locations
- apps/web/components/ui/Modal.tsx: Modal component
- apps/web/components/EndSessionButton.tsx: End Session button
- apps/web/components/EscalationModal.tsx: Escalation prompt modal
- apps/web/pages/index.tsx: Main chat interface integration

### Technical Constraints
- No authentication required [Source: architecture/tech-stack.md]
- No database required (stateless) [Source: architecture/tech-stack.md]
- Components must be accessible (Headless UI requirement) [Source: architecture/tech-stack.md]
- Modal must support keyboard navigation and screen readers

### Previous Story Insights
- Full UI design applied to main screen
- Styled UI component library available
- Chat interface fully functional
- API integration working

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-12-19 | 1.0 | Initial story creation | Bob (SM) |

## Dev Agent Record

### Agent Model Used
TBD

### Debug Log References
TBD

### Completion Notes List
TBD

### File List
TBD

## QA Results
TBD 